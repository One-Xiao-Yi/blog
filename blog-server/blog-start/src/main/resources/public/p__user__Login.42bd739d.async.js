(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(D){D.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},19319:function(D,P,e){"use strict";e.r(P);var V=e(18106),O=e(3276),X=e(34792),E=e(48086),M=e(11849),v=e(3182),K=e(2824),J=e(17462),U=e(76772),b=e(94043),o=e.n(b),A=e(89366),R=e(2603),W=e(67294),x=e(71782),p=e(11679),t=e(21010),y=e(29791),j=e(36571),S=e(34687),l=e.n(S),Z=e(53776),s=e(85893),F=function(c){var f=c.content;return(0,s.jsx)(U.Z,{style:{marginBottom:24},message:f,type:"error",showIcon:!0})},N=function(){var c=(0,W.useState)(null),f=(0,K.Z)(c,1),h=f[0],n=(0,t.YB)(),L=(0,Z.t)("@@initialState"),u=L.initialState,H=L.setInitialState,G=function(){var d=(0,v.Z)(o().mark(function i(g){var r,_,m,B,I,C,T;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,j.x4)((0,M.Z)({},g));case 3:if(r=a.sent,!r.success){a.next=23;break}return _=n.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),E.default.success(_),localStorage.setItem(u!=null&&u.tokenKey?u.tokenKey:"token",r.data),localStorage.setItem("whenLogin",new Date().getTime()+""),a.next=11,(0,j.bG)(r.data);case 11:return m=a.sent,m.data.avatar="/api/file/download/"+m.data.avatar,a.next=15,H(function($){return(0,M.Z)((0,M.Z)({},$),{},{token:r.data,currentUser:m.data})});case 15:if(t.m8){a.next=17;break}return a.abrupt("return");case 17:return B=t.m8.location.query,I=B,C=I.redirect,t.m8.push(C||"/"),a.abrupt("return");case 23:E.default.error("\u767B\u5F55\u5931\u8D25"+r.msg);case 24:a.next=30;break;case 26:a.prev=26,a.t0=a.catch(0),T=n.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),E.default.error(T);case 30:case"end":return a.stop()}},i,null,[[0,26]])}));return function(g){return d.apply(this,arguments)}}(),Y=function(){t.m8.push("/user/registry")};return(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)("div",{className:l().lang,"data-lang":!0,children:t.pD&&(0,s.jsx)(t.pD,{})}),(0,s.jsx)("div",{className:l().content,children:(0,s.jsxs)(x.U,{title:"Xiao Yi Blog",subTitle:n.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:function(){var d=(0,v.Z)(o().mark(function i(g){return o().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,G(g);case 2:case"end":return _.stop()}},i)}));return function(i){return d.apply(this,arguments)}}(),children:[(0,s.jsx)(O.Z,{children:(0,s.jsx)(O.Z.TabPane,{tab:n.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account")}),h!=null&&!h&&(0,s.jsx)(F,{content:n.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{name:"account",fieldProps:{size:"large",prefix:(0,s.jsx)(A.Z,{className:l().prefixIcon})},placeholder:n.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: "}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,s.jsx)(p.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(R.Z,{className:l().prefixIcon})},placeholder:n.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: "}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),(0,s.jsxs)("div",{style:{marginBottom:24},children:[(0,s.jsx)("a",{onClick:Y,children:(0,s.jsx)(t._H,{id:"pages.login.registry",defaultMessage:"\u6CE8\u518C"})}),(0,s.jsx)("a",{style:{float:"right"},children:(0,s.jsx)(t._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,s.jsx)(y.Z,{})]})};P.default=N}}]);
